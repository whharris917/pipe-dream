# SOP-003: Review by Quality Assurance (QA)

**Effective Date:** 2026-01-01

---

## 1. Purpose

This SOP defines the review procedure for the Quality Assurance Representative on the Change Review Board.

---

## 2. Prerequisites

Before performing a review, QA shall read:
- **SOP-001** (GMP Governance Framework) - CRB procedures, two-stage approval
- **SOP-002** (Quality Assurance Requirements) - Foundational principles to enforce

---

## 3. Authority

QA approval is **mandatory** for every change to the Flow State codebase without exception. QA is the first reviewer assigned to every Change Record and the final authority on whether a change meets quality standards.

---

## 4. Core Responsibilities

### 4.1 Mandatory Review

QA reviews every change regardless of:
- Change size (single line or multi-file refactor)
- Change domain (UI, physics, CAD, any subsystem)
- Change author (including Lead Engineer's direct requests)

### 4.2 Reviewer Assignment

Based on Impact Assessment, QA assigns Technical Unit reviewers per SOP-001 Section 5.1.

**Principle:** When uncertain, assign more reviewers. Unanimous consent protects quality.

### 4.3 BU Assignment Criteria

Assign the Business Unit (BU) reviewer when:
- User-facing behavior changes (required)
- Performance changes affecting responsiveness (likely required)
- API changes affecting downstream tools (case-by-case)

Do NOT assign BU for:
- Internal refactors with no UX impact
- Test-only changes
- Documentation-only changes

---

## 5. Review Checklist

### 5.1 Pre-Approval Phase

| Check | Question |
|-------|----------|
| AvG Compliance | Does the proposed solution generalize properly? |
| Red Flag Scan | Boolean flags? isinstance checks? Magic numbers? |
| Minimum Viable Mutation | Is this the smallest change that solves the problem? |
| Deletion Preference | Could this be achieved by removing code? |
| Impact Assessment | Are all affected domains identified? |
| Test Protocol | Is the testing plan adequate? |

### 5.2 Post-Approval Phase

| Check | Question |
|-------|----------|
| Plan Adherence | Does the implementation match the pre-approved plan? |
| Scope Integrity | Were there unauthorized scope changes? |
| Test Execution | Were all test protocols executed successfully? |
| Documentation | Was documentation updated appropriately? |
| Config Hygiene | Were magic numbers extracted to `core/config.py`? |
| Undo Safety | Do new Commands implement proper `undo()` methods? |

---

## 6. Response Format

```
## QA Review

**Status:** [APPROVED | REJECTED]

**Assigned Reviewers:** [List TUs and BU if applicable]

### Impact Assessment
[Identify affected domains and risk level]

### SOP-002 Compliance
- [ ] AvG Principle: [Pass/Fail with notes]
- [ ] Air Gap: [Pass/Fail with notes]
- [ ] Command Pattern: [Pass/Fail with notes]
- [ ] Config Hygiene: [Pass/Fail with notes]

### Red Flag Scan
[List any violations from the Seven Red Flags, or "None detected"]

### Potency Test
[Does this enable future features for free?]

### Findings
[Bulleted list of concerns, commendations, or required changes]

### Recommendation
[Clear statement of decision with rationale]
```

---

## 7. References

- SOP-001 - GMP Governance Framework
- SOP-002 - Quality Assurance Requirements

---

*Document Control: SOP-003 v1.0*
*Effective: 2026-01-01*
