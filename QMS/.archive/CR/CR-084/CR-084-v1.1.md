---
title: Mandate Integration Verification for Code Changes
revision_summary: Initial draft
---

# CR-084: Mandate Integration Verification for Code Changes

## 1. Purpose

Establish mandatory integration verification as a standard step for CRs and VARs involving code changes. Currently, the testing framework addresses automated qualification (unit tests, CI) but has no procedural requirement for demonstrating that changed functionality actually works when exercised through user-facing levers in a running system.

---

## 2. Scope

### 2.1 Context

Independent improvement identified from Phase E process alignment backlog. The project already performs integration verification in practice -- the Lead exercises changed functionality through user-facing interaction to confirm effectiveness -- but it is not mandated by any SOP or template. This creates a gap where unit tests with overly specific mocks can pass despite obvious problems.

- **Parent Document:** None

### 2.2 Changes Summary

Update SOP-002 (testing requirements for code CRs), SOP-004 (VAR resolution guidance), TEMPLATE-CR (testing summary structure and new implementation phase), and TEMPLATE-VAR (resolution work instructions for code changes).

### 2.3 Files Affected

- `QMS/SOP/SOP-002.md` -- Section 6.8 rewrite
- `QMS/SOP/SOP-004.md` -- Section 9A.3 addition
- `QMS/TEMPLATE/TEMPLATE-CR.md` -- CODE CR PATTERNS, Section 8, Section 9
- `QMS/TEMPLATE/TEMPLATE-VAR.md` -- Resolution Work Instructions
- `qms-cli/seed/templates/TEMPLATE-CR.md` -- Seed copy alignment
- `qms-cli/seed/templates/TEMPLATE-VAR.md` -- Seed copy alignment

---

## 3. Current State

SOP-002 Section 6.8 describes the testing summary as a "brief description" with no distinction between automated tests and manual verification. TEMPLATE-CR has 7 standardized code phases with no integration verification step. TEMPLATE-VAR has no testing guidance for code-related resolution work. SOP-004 Section 9A has no testing requirements for VAR resolution. Integration verification is performed ad hoc but not mandated.

---

## 4. Proposed State

SOP-002 Section 6.8 requires code CRs to address both automated verification (unit tests, CI) and integration verification (exercising changed functionality through user-facing levers). TEMPLATE-CR Section 8 has structured subsections for each verification category. TEMPLATE-CR Section 9 includes a new Phase 5 (Integration Verification) between Qualification and RTM Update. TEMPLATE-VAR Resolution Work Instructions include guidance for code-related resolution. SOP-004 Section 9A.3 notes that code-related VAR resolution should include integration verification.

---

## 5. Change Description

### 5.1 SOP-002 Section 6.8 (Testing Summary)

Remove "Brief" from the opening sentence. Add a requirement that code CRs address two verification categories:

1. **Automated verification:** Unit tests, qualification tests, CI checks
2. **Integration verification:** Exercising changed functionality through user-facing levers to demonstrate the change is effective in a running system

Preserve the existing TP escalation escape hatch. Update examples to illustrate both categories. Keep language principles-based -- does not prescribe what to test, only that both categories should be addressed for code CRs.

### 5.2 SOP-004 Section 9A.3 (VAR Content)

Add one paragraph at the end of the existing VAR content bullet list: when VAR resolution involves code changes, resolution work should include integration verification. Uses advisory language ("should") rather than mandatory ("shall") because VARs are already tightly scoped by parent objectives.

### 5.3 TEMPLATE-CR Changes

**CODE CR PATTERNS** (comment block): Add bullet about integration verification being required, referencing SOP-002 Section 6.8.

**Section 8 (Testing Summary)**: Restructure with two subsections -- Automated Verification and Integration Verification -- with a comment block explaining the distinction. For document-only CRs, authors can simplify or remove subsections.

**Section 9 (Implementation Plan)**: Insert new Phase 5 (Integration Verification) between current Phase 4 (Qualification) and Phase 5 (RTM Update). Renumber downstream phases: 5 becomes 6, 6 becomes 7, 7 becomes 8. The new phase includes launching the system, exercising changed functionality, confirming no regressions, and documenting results. A comment block clarifies the three-layer distinction: Phase 4 (automated tests), Phase 5 (does it work when you use it?), Phase 7 step 7 (post-merge smoke test).

### 5.4 TEMPLATE-VAR Changes

Add a `WHEN RESOLUTION INVOLVES CODE CHANGES:` block to the Resolution Work Instructions comment, alongside existing `FOR TEST-RELATED VARIANCES:`, `FOR CR/INV VARIANCES:`, and `FOR SIMPLE RESOLUTIONS:` blocks. Cross-references SOP-002 Section 6.8 and SOP-004 Section 9A.3.

### 5.5 Seed Copy Alignment

Align template body content in `qms-cli/seed/templates/TEMPLATE-CR.md` and `qms-cli/seed/templates/TEMPLATE-VAR.md` with their QMS counterparts after the QMS copies reach EFFECTIVE.

---

## 6. Justification

- Automated tests verify correctness at the unit/module level but cannot catch integration failures, UX regressions, or environment-specific issues. Mocks that are too specific can cause tests to pass despite obvious problems.
- Without this change, integration verification remains ad hoc -- it happens when the Lead remembers to do it, but is not a procedural requirement. New CRs could omit it entirely.
- The proposed changes codify existing practice (demonstrating changes through user-facing levers) and make it a standard step that is visible to QA during post-review.

---

## 7. Impact Assessment

### 7.1 Files Affected

| File | Change Type | Description |
|------|-------------|-------------|
| `QMS/SOP/SOP-002.md` | Modify | Section 6.8 rewrite |
| `QMS/SOP/SOP-004.md` | Modify | Section 9A.3 addition |
| `QMS/TEMPLATE/TEMPLATE-CR.md` | Modify | CODE CR PATTERNS, Section 8, Section 9 |
| `QMS/TEMPLATE/TEMPLATE-VAR.md` | Modify | Resolution Work Instructions |
| `qms-cli/seed/templates/TEMPLATE-CR.md` | Modify | Seed copy alignment |
| `qms-cli/seed/templates/TEMPLATE-VAR.md` | Modify | Seed copy alignment |

### 7.2 Documents Affected

| Document | Change Type | Description |
|----------|-------------|-------------|
| SOP-002 | Modify | Section 6.8 updated |
| SOP-004 | Modify | Section 9A.3 addition |
| TEMPLATE-CR | Modify | Testing summary structure, new Phase 5, phase renumbering |
| TEMPLATE-VAR | Modify | Resolution Work Instructions |

### 7.3 Other Impacts

None. This CR codifies emerging practice -- it does not change the workflow for document-only CRs.

---

## 8. Testing Summary

No code changes. Verification is procedural:

- All four documents are internally consistent after updates
- Cross-references are valid (SOP-002 Section 6.8 from templates, SOP-004 Section 9A.3 from TEMPLATE-VAR)
- TEMPLATE-CR phase numbering is consistent (Phases 1-8, Sections 9.1-9.8)
- Seed copies match QMS copies in template body content
- SOP-002 Section 7.3 still references Section 6.8 correctly (no broken downstream refs)

---

## 9. Implementation Plan

### 9.1 Document Updates

All four QMS documents can be edited in parallel and routed together. Seed copy alignment follows after templates reach EFFECTIVE.

1. Checkout all four documents (SOP-002, SOP-004, TEMPLATE-CR, TEMPLATE-VAR)
2. Apply edits per Change Description
3. Checkin all four documents
4. Route for review, address feedback
5. Route for approval, all four reach EFFECTIVE
6. Align seed copies with QMS copies

---

## 10. Execution

<!--
EXECUTION PHASE INSTRUCTIONS
============================
NOTE: Do NOT delete this comment block. It provides guidance for execution.

- Sections 1-9 are PRE-APPROVED content - do NOT modify during execution
- Only THIS TABLE and the comment sections below should be edited during execution phase

COLUMNS:
- EI: Execution item identifier
- Task Description: What to do (static, from Implementation Plan)
- Execution Summary: Narrative of what was done, evidence, observations (editable)
- Task Outcome: Pass or Fail (editable)
- Performed By - Date: Signature (editable)

TASK OUTCOME:
- Pass: Task completed as planned
- Fail: Task could not be completed as planned - attach VAR with explanation

VAR TYPES (see VAR-TEMPLATE):
- Type 1: Use when the failed task is critical to CR objectives
- Type 2: Use when impact is contained and CR can conceptually close

EXECUTION SUMMARY EXAMPLES:
- "Implemented per plan. Commit abc123."
- "Modified src/module.py:45-67. Unit tests passing."
- "Created SOP-007 (now EFFECTIVE)."
-->

| EI | Task Description | Execution Summary | Task Outcome | Performed By - Date |
|----|------------------|-------------------|--------------|---------------------|
| EI-1 | Update SOP-002 Section 6.8: checkout, edit, checkin, route review/approval to EFFECTIVE | Checked out SOP-002 v9.1. Removed "Brief" from opening sentence. Added two-category requirement (automated + integration verification) for code CRs. Updated examples to show both categories. Preserved TP escalation escape hatch. Checked in, routed for review (QA recommended), routed for approval. SOP-002 now EFFECTIVE v10.0. | Pass | claude - 2026-02-15 |
| EI-2 | Update SOP-004 Section 9A.3: checkout, edit, checkin, route review/approval to EFFECTIVE | Checked out SOP-004 v4.1. Added one advisory paragraph to Section 9A.3: code-related VAR resolution should include integration verification. Advisory "should" language, not mandatory "shall". Checked in, routed for review (QA recommended), routed for approval. SOP-004 now EFFECTIVE v5.0. | Pass | claude - 2026-02-15 |
| EI-3 | Update TEMPLATE-CR: CODE CR PATTERNS, Section 8, new Phase 5, renumber phases. Checkout, edit, checkin, route review/approval to EFFECTIVE | Checked out TEMPLATE-CR v4.1. Three changes: (1) Added integration verification bullet to CODE CR PATTERNS and "pattern ensures" list; (2) Restructured Section 8 with Automated Verification and Integration Verification subsections plus guidance comment; (3) Inserted new Phase 5 (Integration Verification) with 4 steps and three-layer distinction comment, renumbered Phases 5→6, 6→7, 7→8 (now Sections 9.5-9.8). Checked in, routed for review (QA recommended), routed for approval. TEMPLATE-CR now EFFECTIVE v5.0. | Pass | claude - 2026-02-15 |
| EI-4 | Update TEMPLATE-VAR: Resolution Work Instructions. Checkout, edit, checkin, route review/approval to EFFECTIVE | Checked out TEMPLATE-VAR v1.1. Added WHEN RESOLUTION INVOLVES CODE CHANGES block to Resolution Work Instructions author comment, alongside existing FOR TEST-RELATED, FOR CR/INV, and FOR SIMPLE RESOLUTIONS blocks. Cross-references SOP-002 Section 6.8 and SOP-004 Section 9A.3. Checked in, routed for review (QA recommended), routed for approval. TEMPLATE-VAR now EFFECTIVE v2.0. | Pass | claude - 2026-02-15 |
| EI-5 | Align seed copies (TEMPLATE-CR and TEMPLATE-VAR in qms-cli/seed/templates/) | Compared QMS EFFECTIVE copies with seed copies. Wrote aligned content to both seed files: TEMPLATE-CR seed now includes integration verification bullet in CODE CR PATTERNS, restructured Section 8, new Phase 5, and 8-phase layout (Sections 9.1-9.8). TEMPLATE-VAR seed now includes WHEN RESOLUTION INVOLVES CODE CHANGES block. Both seed revision_summary fields updated to reference CR-084. | Pass | claude - 2026-02-15 |

<!--
NOTE: Do NOT delete this comment. It provides guidance during document execution.

Add rows as needed. When adding rows, fill columns 3-5 during execution.
-->

---

### Execution Comments

| Comment | Performed By - Date |
|---------|---------------------|
| All four QMS documents checked out, edited, checked in, and routed together. QA reviewed and recommended all four simultaneously, then approved all four. No variances. | claude - 2026-02-15 |
| Seed copy alignment deferred to after all templates reached EFFECTIVE, per plan. Pre-existing seed drift noted (TEMPLATE-VAR seed had `revision_summary: Initial release` vs QMS `CR-017` reference) -- corrected as part of alignment. | claude - 2026-02-15 |

<!--
NOTE: Do NOT delete this comment. It provides guidance during document execution.

Record observations, decisions, or issues encountered during execution.
Add rows as needed.

This section is the appropriate place to attach VARs that do not apply
to any individual execution item, but apply to the CR as a whole.
-->

---

## 11. Execution Summary

<!--
NOTE: Do NOT delete this comment. It provides guidance during document execution.

Complete this section after all EIs are executed.
Summarize the overall outcome and any deviations from the plan.
-->

All five execution items completed as planned. SOP-002 v10.0, SOP-004 v5.0, TEMPLATE-CR v5.0, and TEMPLATE-VAR v2.0 are all EFFECTIVE. Seed copies in qms-cli/seed/templates/ are aligned with QMS EFFECTIVE content. No variances encountered. Cross-references verified: SOP-002 Section 6.8 referenced from TEMPLATE-CR and TEMPLATE-VAR; SOP-004 Section 9A.3 referenced from TEMPLATE-VAR. TEMPLATE-CR phase numbering is consistent (Phases 1-8, Sections 9.1-9.8).

---

## 12. References

- **SOP-001:** Document Control
- **SOP-002:** Change Control (target of EI-1)
- **SOP-004:** Document Execution (target of EI-2)

---

**END OF DOCUMENT**
