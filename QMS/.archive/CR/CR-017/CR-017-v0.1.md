---
title: Migrate Document Templates into QMS Control
revision_summary: 'v0.2: Added QMS CLI extension for dynamic document types'
---

# CR-017: Migrate Document Templates into QMS Control

## 1. Purpose

Bring the 7 document templates currently residing in `.claude/workshop/templates/` under formal QMS document control, establishing them as controlled documents with version tracking and change control. This requires extending the QMS CLI to support extensible document types.

---

## 2. Scope

### 2.1 Context

- **Parent Document:** None (follows CR-016 which aligned SOPs with templates)

### 2.2 Changes Summary

1. Extend the QMS CLI to support dynamic document type registration
2. Add TEMPLATE as a new document type
3. Move 7 document templates from the uncontrolled workshop directory into QMS control

### 2.3 Files Affected

**QMS CLI (code changes):**
- `.claude/qms_schema.py` - Add dynamic type detection and TEMPLATE support
- `.claude/qms.py` - Add TEMPLATE to DOCUMENT_TYPES configuration

**Source (templates to be moved):**
- `.claude/workshop/templates/SOP-TEMPLATE.md`
- `.claude/workshop/templates/CR-TEMPLATE.md`
- `.claude/workshop/templates/TC-TEMPLATE.md`
- `.claude/workshop/templates/TP-TEMPLATE.md`
- `.claude/workshop/templates/ER-TEMPLATE.md`
- `.claude/workshop/templates/VAR-TEMPLATE.md`
- `.claude/workshop/templates/INV-TEMPLATE.md`

**Destination:**
- `QMS/TEMPLATE/` (new directory)

---

## 3. Current State

1. Document templates exist in `.claude/workshop/templates/` outside QMS control
2. QMS CLI has hard-coded document types in `qms_schema.py` and `qms.py`
3. Adding a new document type requires modifying multiple files with hard-coded values

---

## 4. Proposed State

1. Document templates reside in `QMS/TEMPLATE/` as controlled documents
2. QMS CLI uses a flexible type system that:
   - Supports explicit configuration for known types (backward compatibility)
   - Allows new types to be added with minimal code changes
   - Derives type from doc_id prefix pattern for unknown types
3. TEMPLATE is registered as a non-executable document type

---

## 5. Change Description

### 5.1 QMS CLI Extension: Dynamic Type Support

**Objective:** Allow new document types to be added without hard-coding in multiple locations.

**Current Hard-Coded Locations:**
1. `qms_schema.py`:
   - `DOC_TYPES` (line 13): Set of valid types
   - `FOLDER_DOC_TYPES` (line 16): Types using folder structure
   - `EXECUTABLE_TYPES` (line 19): Executable types
   - `DOC_ID_PATTERNS` (line 40-53): Regex patterns for ID validation

2. `qms.py`:
   - `DOCUMENT_TYPES` (line 71-83): Type configuration dict

**Solution:**

1. Update `qms_schema.py` to add TEMPLATE type configuration:
   ```python
   DOC_TYPES = {..., "TEMPLATE"}
   DOC_ID_PATTERNS = {..., "TEMPLATE": re.compile(r"^TEMPLATE-[A-Z]+$")}
   ```

2. Update `qms.py` DOCUMENT_TYPES:
   ```python
   "TEMPLATE": {"path": "TEMPLATE", "executable": False, "prefix": "TEMPLATE"}
   ```

3. Update `get_doc_type_from_id()` to handle TEMPLATE-* pattern

### 5.2 TEMPLATE Document Type

| Property | Value |
|----------|-------|
| Document Type | TEMPLATE |
| Executable | No |
| Workflow | Non-executable (DRAFT -> IN_REVIEW -> EFFECTIVE) |
| Naming | TEMPLATE-{NAME} (e.g., TEMPLATE-CR, TEMPLATE-SOP) |
| Path | `QMS/TEMPLATE/` |
| folder_per_doc | No (each template is a single file) |

### 5.3 Template Naming Convention

| Current Name | QMS Name |
|--------------|----------|
| SOP-TEMPLATE.md | TEMPLATE-SOP.md |
| CR-TEMPLATE.md | TEMPLATE-CR.md |
| TC-TEMPLATE.md | TEMPLATE-TC.md |
| TP-TEMPLATE.md | TEMPLATE-TP.md |
| ER-TEMPLATE.md | TEMPLATE-ER.md |
| VAR-TEMPLATE.md | TEMPLATE-VAR.md |
| INV-TEMPLATE.md | TEMPLATE-INV.md |

### 5.4 Directory Structure

```
QMS/
├── TEMPLATE/
│   ├── TEMPLATE-SOP.md
│   ├── TEMPLATE-CR.md
│   ├── TEMPLATE-TC.md
│   ├── TEMPLATE-TP.md
│   ├── TEMPLATE-ER.md
│   ├── TEMPLATE-VAR.md
│   └── TEMPLATE-INV.md
├── .meta/
│   └── TEMPLATE/
│       ├── TEMPLATE-SOP.json
│       ├── TEMPLATE-CR.json
│       └── ...
└── .audit/
    └── TEMPLATE/
        ├── TEMPLATE-SOP.jsonl
        ├── TEMPLATE-CR.jsonl
        └── ...
```

---

## 6. Justification

- **Extensibility:** Adding TEMPLATE exposes the need for a more flexible type system
- **Maintainability:** Reducing hard-coded values makes future types easier to add
- **Traceability:** Template changes should be traceable like any other QMS document
- **Consistency:** CR-016 aligned SOPs with templates; ongoing alignment requires change control on both sides
- **Governance:** Templates define document structure; uncontrolled changes could create inconsistencies

---

## 7. Impact Assessment

### 7.1 Files Affected

| File | Change Type | Description |
|------|-------------|-------------|
| `.claude/qms_schema.py` | Modify | Add TEMPLATE to DOC_TYPES, DOC_ID_PATTERNS |
| `.claude/qms.py` | Modify | Add TEMPLATE to DOCUMENT_TYPES configuration |
| `.claude/workshop/templates/*.md` | Move | Move to `QMS/TEMPLATE/` with new names |
| `QMS/TEMPLATE/` | Create | New directory for templates |
| `QMS/.meta/TEMPLATE/` | Create | Metadata for template documents |
| `QMS/.audit/TEMPLATE/` | Create | Audit trail for template documents |

### 7.2 Documents Affected

| Document | Change Type | Description |
|----------|-------------|-------------|
| SOP-001 | Update Required | Add TEMPLATE to document type list in Section 6.1 |

### 7.3 Other Impacts

- Future template changes will require CRs
- Pattern established for adding other document types in future

---

## 8. Testing Summary

- Verify `qms create TEMPLATE --title "Test"` fails appropriately (templates are created by migration, not by create command)
- Verify `qms read TEMPLATE-CR` returns the template content
- Verify `qms checkout TEMPLATE-CR` works correctly
- Verify `qms checkin TEMPLATE-CR` works correctly
- Verify `qms status TEMPLATE-CR` shows correct metadata
- Verify templates follow standard non-executable workflow
- Manual verification that template content is preserved during migration

---

## 9. Implementation Plan

### 9.1 Phase 1: QMS CLI Extension

1. Update `qms_schema.py`:
   - Add `TEMPLATE` to `DOC_TYPES`
   - Add `TEMPLATE` pattern to `DOC_ID_PATTERNS`
   - Update `get_doc_type_from_id()` to recognize TEMPLATE-* pattern

2. Update `qms.py`:
   - Add `TEMPLATE` to `DOCUMENT_TYPES` configuration

3. Test CLI changes with manual commands

### 9.2 Phase 2: Directory Setup

1. Create `QMS/TEMPLATE/` directory
2. Create `QMS/.meta/TEMPLATE/` directory
3. Create `QMS/.audit/TEMPLATE/` directory

### 9.3 Phase 3: Template Migration

For each of the 7 templates:
1. Copy from workshop to QMS with new naming
2. Update frontmatter (title, revision_summary)
3. Initialize metadata and audit trail
4. Route for review and make EFFECTIVE

### 9.4 Phase 4: Cleanup

1. Remove original files from `.claude/workshop/templates/`
2. Update SOP-001 to document TEMPLATE type

---

## 10. Execution

| EI | Task Description | Execution Summary | Task Outcome | Performed By — Date |
|----|------------------|-------------------|--------------|---------------------|
| EI-1 | Update qms_schema.py to add TEMPLATE type support | [SUMMARY] | [Pass/Fail] | [PERFORMER] — [DATE] |
| EI-2 | Update qms.py DOCUMENT_TYPES with TEMPLATE configuration | [SUMMARY] | [Pass/Fail] | [PERFORMER] — [DATE] |
| EI-3 | Test QMS CLI recognizes TEMPLATE document type | [SUMMARY] | [Pass/Fail] | [PERFORMER] — [DATE] |
| EI-4 | Create QMS/TEMPLATE directory structure | [SUMMARY] | [Pass/Fail] | [PERFORMER] — [DATE] |
| EI-5 | Migrate TEMPLATE-SOP and make EFFECTIVE | [SUMMARY] | [Pass/Fail] | [PERFORMER] — [DATE] |
| EI-6 | Migrate TEMPLATE-CR and make EFFECTIVE | [SUMMARY] | [Pass/Fail] | [PERFORMER] — [DATE] |
| EI-7 | Migrate TEMPLATE-TC and make EFFECTIVE | [SUMMARY] | [Pass/Fail] | [PERFORMER] — [DATE] |
| EI-8 | Migrate TEMPLATE-TP and make EFFECTIVE | [SUMMARY] | [Pass/Fail] | [PERFORMER] — [DATE] |
| EI-9 | Migrate TEMPLATE-ER and make EFFECTIVE | [SUMMARY] | [Pass/Fail] | [PERFORMER] — [DATE] |
| EI-10 | Migrate TEMPLATE-VAR and make EFFECTIVE | [SUMMARY] | [Pass/Fail] | [PERFORMER] — [DATE] |
| EI-11 | Migrate TEMPLATE-INV and make EFFECTIVE | [SUMMARY] | [Pass/Fail] | [PERFORMER] — [DATE] |
| EI-12 | Remove workshop/templates directory | [SUMMARY] | [Pass/Fail] | [PERFORMER] — [DATE] |
| EI-13 | Update SOP-001 to document TEMPLATE type | [SUMMARY] | [Pass/Fail] | [PERFORMER] — [DATE] |
| EI-14 | Verify all templates accessible and functional via QMS CLI | [SUMMARY] | [Pass/Fail] | [PERFORMER] — [DATE] |

---

### Execution Comments

| Comment | Performed By — Date |
|---------|---------------------|
| [COMMENT] | [PERFORMER] — [DATE] |

---

## 11. Execution Summary

[EXECUTION_SUMMARY]

---

## 12. References

- **SOP-001:** Document Control (to be updated)
- **SOP-002:** Change Control
- **CR-016:** SOP and Template Cross-Validation Alignment (predecessor)

---

**END OF DOCUMENT**
