---
title: Relax CR ID requirement in revision_summary
revision_summary: Initial draft
---

# CR-033: Relax CR ID requirement in revision_summary

## 1. Purpose

This CR relaxes the requirement that the `revision_summary` frontmatter field must begin with an authorizing CR ID. The current requirement is overly prescriptive and creates awkward situations where documents must reference themselves or where updates do not naturally stem from a CR.

---

## 2. Scope

### 2.1 Context

Independent improvement identified during development. The current requirement causes friction in several scenarios:
- CRs themselves (self-authorizing documents)
- Initial document creation (already exempted, but inconsistently)
- Documents updated through workflows that don't naturally map to a single CR

- **Parent Document:** None

### 2.2 Changes Summary

Change the `revision_summary` CR ID reference from a hard requirement to a guideline: reference a CR *if* the update was driven by a CR. Remove enforcement from review prompts and agent definitions.

### 2.3 Files Affected

- `QMS/SOP/SOP-001.md` - Update Section 5.1 to make CR ID reference optional
- `QMS/SOP/SOP-002.md` - Update Section 8 to make CR ID reference a guideline
- `.claude/agents/qa.md` - Update Review Criteria table
- `qms-cli/prompts/review/default.yaml` - Remove CR ID enforcement
- `qms-cli/prompts/review/review/default.yaml` - Remove CR ID enforcement
- `qms-cli/prompts/review/pre_review/default.yaml` - Remove CR ID enforcement
- `qms-cli/prompts/review/post_review/default.yaml` - Remove CR ID enforcement
- `qms-cli/prompts/approval/default.yaml` - Remove CR ID enforcement

---

## 3. Current State

SOP-001 Section 5.1 states that `revision_summary` "Must begin with the authorizing CR ID for traceability."

SOP-002 Section 8 states that "All document revisions made under a Change Record must reference the CR ID in their `revision_summary` frontmatter field."

The QA agent definition and review prompts enforce this as a hard requirement, treating missing CR IDs as grounds for rejection.

---

## 4. Proposed State

SOP-001 Section 5.1 states that `revision_summary` "should reference the authorizing CR ID when the revision is driven by a CR."

SOP-002 Section 8 provides guidance that CR ID references are recommended for traceability when applicable, with clear exceptions documented.

The QA agent definition and review prompts verify that `revision_summary` is present and descriptive, without requiring a CR ID prefix.

---

## 5. Change Description

### 5.1 SOP-001 Section 5.1 Update

Change the `revision_summary` description from:

> **revision_summary**: Updated each revision cycle to describe changes. Must begin with the authorizing CR ID for traceability (e.g., `CR-004: Add traceability requirement`). Exception: initial document creation (v0.1) does not require a CR ID.

To:

> **revision_summary**: Updated each revision cycle to describe changes. Should reference the authorizing CR ID when the revision is driven by a CR (e.g., `CR-004: Add traceability requirement`). This provides traceability to the change control record. Exceptions where CR ID is not required:
> - Initial document creation (v0.1)
> - Executable documents (CRs, INVs, etc.) which are self-authorizing
> - Revisions not driven by a specific CR

### 5.2 SOP-002 Section 8 Update

Change SOP-002 Section 8 from:

> ## 8. Document Traceability
>
> All document revisions made under a Change Record must reference the CR ID in their `revision_summary` frontmatter field.
>
> **Format:**
> ```yaml
> revision_summary: "CR-XXX: Description of changes"
> ```
>
> **Example:**
> ```yaml
> revision_summary: "CR-004: Add traceability requirement for revision summaries"
> ```
>
> This requirement:
> - Establishes a clear link between document changes and their authorizing CRs
> - Enables audit trails from any document revision back to the change control record
> - Provides context (rationale, approvers, testing) for any historical revision
>
> **Exceptions:**
> - Initial document creation (v0.1) does not require a CR ID
> - Documents created before this policy took effect are grandfathered

To:

> ## 8. Document Traceability
>
> Document revisions driven by a Change Record should reference the CR ID in their `revision_summary` frontmatter field for traceability.
>
> **Recommended Format:**
> ```yaml
> revision_summary: "CR-XXX: Description of changes"
> ```
>
> **Example:**
> ```yaml
> revision_summary: "CR-004: Add traceability requirement for revision summaries"
> ```
>
> **Benefits of CR ID references:**
> - Establishes a clear link between document changes and their authorizing CRs
> - Enables audit trails from any document revision back to the change control record
> - Provides context (rationale, approvers, testing) for any historical revision
>
> **When CR ID is not required:**
> - Initial document creation (v0.1)
> - Executable documents (CRs, INVs, TPs, ERs, VARs) which are self-authorizing
> - Revisions not driven by a specific CR
> - Documents created before this policy took effect

### 5.3 QA Agent Definition Update

Update the Review Criteria table entry for `revision_summary` from:

> Present for v1.0+ documents; begins with CR ID

To:

> Present for v1.0+ documents; descriptive of changes

### 5.4 Review Prompt Updates

Remove the checklist item "`revision_summary:` begins with CR ID" from all review prompts. Keep the requirement that `revision_summary` is present and non-empty.

---

## 6. Justification

- **Problem:** The current requirement creates awkward situations. CRs must reference themselves (circular). Some documents are updated through processes that don't map cleanly to a single CR.
- **Impact of not changing:** Continued friction and potential for reviewers to reject valid documents, or for authors to invent meaningless CR references.
- **Solution:** Making CR ID reference a guideline preserves traceability benefits where they apply naturally, while eliminating friction where they don't.

---

## 7. Impact Assessment

### 7.1 Files Affected

| File | Change Type | Description |
|------|-------------|-------------|
| `QMS/SOP/SOP-001.md` | Modify | Update Section 5.1 revision_summary description |
| `QMS/SOP/SOP-002.md` | Modify | Update Section 8 to make CR ID a guideline |
| `.claude/agents/qa.md` | Modify | Update Review Criteria table |
| `qms-cli/prompts/review/default.yaml` | Modify | Remove CR ID checklist item |
| `qms-cli/prompts/review/review/default.yaml` | Modify | Remove CR ID checklist item |
| `qms-cli/prompts/review/pre_review/default.yaml` | Modify | Remove CR ID checklist item |
| `qms-cli/prompts/review/post_review/default.yaml` | Modify | Remove CR ID checklist item |
| `qms-cli/prompts/approval/default.yaml` | Modify | Update frontmatter description |

### 7.2 Documents Affected

| Document | Change Type | Description |
|----------|-------------|-------------|
| SOP-001 | Modify | Update Section 5.1 |
| SOP-002 | Modify | Update Section 8 |

### 7.3 Other Impacts

None. This change relaxes a requirement; it does not break any existing valid documents.

---

## 8. Testing Summary

- Verify SOP-001 Section 5.1 clearly states CR ID is optional with documented exceptions
- Verify SOP-002 Section 8 frames CR ID as guidance, not requirement
- Verify QA agent definition no longer requires CR ID in revision_summary
- Verify all review prompts no longer enforce CR ID requirement
- Verify existing documents with CR ID references remain valid (backward compatible)

---

## 9. Implementation Plan

### 9.1 SOP Updates

1. Checkout SOP-001 and update Section 5.1
2. Checkout SOP-002 and update Section 8
3. Check in both SOPs
4. Route SOPs for review and approval

### 9.2 Agent and Prompt Updates

1. Update `.claude/agents/qa.md` Review Criteria table
2. Update `qms-cli/prompts/review/default.yaml`
3. Update `qms-cli/prompts/review/review/default.yaml`
4. Update `qms-cli/prompts/review/pre_review/default.yaml`
5. Update `qms-cli/prompts/review/post_review/default.yaml`
6. Update `qms-cli/prompts/approval/default.yaml`

---

## 10. Execution

<!--
EXECUTION PHASE INSTRUCTIONS
============================
NOTE: Do NOT delete this comment block. It provides guidance for execution.

- Sections 1-9 are PRE-APPROVED content - do NOT modify during execution
- Only THIS TABLE and the comment sections below should be edited during execution phase

COLUMNS:
- EI: Execution item identifier
- Task Description: What to do (static, from Implementation Plan)
- Execution Summary: Narrative of what was done, evidence, observations (editable)
- Task Outcome: Pass or Fail (editable)
- Performed By - Date: Signature (editable)

TASK OUTCOME:
- Pass: Task completed as planned
- Fail: Task could not be completed as planned - attach VAR with explanation

VAR TYPES (see VAR-TEMPLATE):
- Type 1: Use when the failed task is critical to CR objectives
- Type 2: Use when impact is contained and CR can conceptually close

EXECUTION SUMMARY EXAMPLES:
- "Implemented per plan. Commit abc123."
- "Modified src/module.py:45-67. Unit tests passing."
- "Created SOP-007 (now EFFECTIVE)."
-->

| EI | Task Description | Execution Summary | Task Outcome | Performed By - Date |
|----|------------------|-------------------|--------------|---------------------|
| EI-1 | Checkout SOP-001 and update Section 5.1 | Checked out SOP-001 (v16.0→v16.1). Updated Section 5.1 to replace "Must begin with" with "Should reference when driven by a CR" and added exceptions list. Updated revision_summary frontmatter. | Pass | claude - 2026-01-19 |
| EI-2 | Checkout SOP-002 and update Section 8 | Checked out SOP-002 (v6.0→v6.1). Replaced Section 8 per specification: changed "must reference" to "should reference", "Format" to "Recommended Format", "This requirement" to "Benefits of CR ID references", "Exceptions" to "When CR ID is not required" with expanded list. Updated revision_summary frontmatter. | Pass | claude - 2026-01-19 |
| EI-3 | Check in SOP-001 and SOP-002 | Both SOPs checked in successfully. SOP-001 v16.1, SOP-002 v6.1. | Pass | claude - 2026-01-19 |
| EI-4 | Route SOPs for review and obtain approval | Both SOPs routed for review, received RECOMMEND from QA, routed for approval, approved. SOP-001 now v17.0 EFFECTIVE, SOP-002 now v7.0 EFFECTIVE. | Pass | claude - 2026-01-19 |
| EI-5 | Update QA agent definition (.claude/agents/qa.md) | Updated Review Criteria table: changed "begins with CR ID" to "descriptive of changes" for revision_summary verification. | Pass | claude - 2026-01-19 |
| EI-6 | Update review prompts (4 files) | Updated all 4 files: removed CR ID checklist item, changed to "present and descriptive". Files: review/default.yaml, review/review/default.yaml, review/pre_review/default.yaml, review/post_review/default.yaml. | Pass | claude - 2026-01-19 |
| EI-7 | Update approval prompt (1 file) | Updated approval/default.yaml: changed "revision_summary with CR ID" to "revision_summary present and descriptive". | Pass | claude - 2026-01-19 |

<!--
NOTE: Do NOT delete this comment. It provides guidance during document execution.

Add rows as needed. When adding rows, fill columns 3-5 during execution.
-->

---

### Execution Comments

| Comment | Performed By - Date |
|---------|---------------------|
| Execution proceeded smoothly. No deviations from plan. | claude - 2026-01-19 |

<!--
NOTE: Do NOT delete this comment. It provides guidance during document execution.

Record observations, decisions, or issues encountered during execution.
Add rows as needed.

This section is the appropriate place to attach VARs that do not apply
to any individual execution item, but apply to the CR as a whole.
-->

---

## 11. Execution Summary

<!--
NOTE: Do NOT delete this comment. It provides guidance during document execution.

Complete this section after all EIs are executed.
Summarize the overall outcome and any deviations from the plan.
-->

All 7 execution items completed successfully with Pass outcomes.

**SOP Updates:**
- SOP-001 updated from v16.0 to v17.0 EFFECTIVE (Section 5.1 modified)
- SOP-002 updated from v6.0 to v7.0 EFFECTIVE (Section 8 modified)

**Agent/Prompt Updates:**
- QA agent definition updated (Review Criteria table)
- 4 review prompt files updated (CR ID requirement removed)
- 1 approval prompt file updated (CR ID requirement removed)

The `revision_summary` field is now governed by guidance rather than hard requirement. CR ID references are recommended when revisions are driven by a CR, but are explicitly not required for initial creation, self-authorizing executable documents, or revisions not driven by a specific CR.

---

## 12. References

- **SOP-001:** Document Control (governs revision_summary field)
- **SOP-002:** Change Control (defines traceability requirements)
- **SOP-004:** Document Execution

---

**END OF DOCUMENT**
