---
title: 'CAPA-001: Align All 9 Templates Between QMS and Seed'
revision_summary: Initial draft
---

# CR-098: CAPA-001: Align All 9 Templates Between QMS and Seed

## 1. Purpose

This CR implements corrective action INV-013-CAPA-001 to remediate the systematic divergence between QMS-controlled templates (`QMS/TEMPLATE/`) and seed templates (`qms-cli/seed/templates/`). All 9 template pairs will be aligned so both locations contain functionally equivalent content.

---

## 2. Scope

### 2.1 Context

Corrective action from INV-013, which investigated systematic template drift between the dual-template architecture discovered during CR-097 closure.

- **Parent Document:** INV-013 (CAPA-001)

### 2.2 Changes Summary

Align all 9 templates between QMS and seed by propagating missing changes in both directions:
- Update QMS TEMPLATE-VR from schema v3 to v5 (seed is ahead)
- Update seed TEMPLATE-CR, TEMPLATE-ADD, TEMPLATE-VAR to include VR column (QMS is ahead)
- Reconcile 5 Category C templates for migration cosmetic differences

### 2.3 Files Affected

- `QMS/TEMPLATE/TEMPLATE-VR.md` — Update to schema v5 from seed
- `qms-cli/seed/templates/TEMPLATE-CR.md` — Add VR column to EI table and execution instructions
- `qms-cli/seed/templates/TEMPLATE-ADD.md` — Add VR column to EI table and execution instructions
- `qms-cli/seed/templates/TEMPLATE-VAR.md` — Add VR column to EI table/resolution work section
- `qms-cli/seed/templates/TEMPLATE-ER.md` — Reconcile with QMS copy
- `qms-cli/seed/templates/TEMPLATE-INV.md` — Reconcile with QMS copy
- `qms-cli/seed/templates/TEMPLATE-SOP.md` — Reconcile with QMS copy
- `qms-cli/seed/templates/TEMPLATE-TC.md` — Reconcile with QMS copy
- `qms-cli/seed/templates/TEMPLATE-TP.md` — Reconcile with QMS copy

---

## 3. Current State

The project maintains templates in two locations with complementary purposes. QMS-controlled templates are used in the active QMS instance; seed templates are bundled with qms-cli for bootstrapping new instances. All 9 template pairs have diverged:

- **Category A** (QMS ahead): TEMPLATE-CR, TEMPLATE-ADD, TEMPLATE-VAR — QMS has VR column from CR-089; seed lacks it
- **Category B** (seed ahead): TEMPLATE-VR — seed at schema v5 (CR-095); QMS at schema v3 (CR-091)
- **Category C** (migration cosmetics): TEMPLATE-ER, TEMPLATE-INV, TEMPLATE-SOP, TEMPLATE-TC, TEMPLATE-TP — differ in revision_summary and potentially cosmetic details from CR-017 migration

---

## 4. Proposed State

All 9 template pairs contain functionally equivalent content. Both locations reflect the latest changes from all prior CRs. A new QMS instance bootstrapped via `qms init` would receive the same template capabilities as the active QMS instance.

---

## 5. Change Description

### 5.1 Category B: Update QMS TEMPLATE-VR (schema v3 → v5)

The QMS-controlled TEMPLATE-VR will be updated to match the seed copy at schema v5. Key changes from schema v3 to v5:
- Schema version tag: `version: 3` → `version: 5`
- Add `@end-prompt` tag to schema reference
- Remove separate `date` prompt (date is now auto-populated)
- Add `@end-prompt` boundary tags after all prompts/gates
- Remove bold label prefixes (`**Objective:**`, `**Expected:**`, `**Actual:**`, `**Outcome:**`, `**Overall Outcome:**`)
- Rename "Pre-Conditions" to "Prerequisites"
- Change step heading format: `### Step {{_n}}` → `### 4.{{_n}} Step {{_n}}`
- Remove Section 6 (Signature) and Section 7 (References)
- Simplify flow: `summary_narrative | next: end` (removes performer/date prompts)

### 5.2 Category A: Update Seed TEMPLATE-CR, TEMPLATE-ADD, TEMPLATE-VAR

Each seed template's EI table or resolution work section will be updated to include the VR column added by CR-089 in the QMS copies:

**EI table change (CR, ADD):**
- From: `| EI | Task Description | Execution Summary | Task Outcome | Performed By - Date |`
- To: `| EI | Task Description | VR | Execution Summary | Task Outcome | Performed By - Date |`

**Execution instructions comment update:** Add VR column guidance to match QMS copy.

**VAR:** The VR column was added to the resolution work section, not a standard EI table. The seed copy will be updated to match.

### 5.3 Category C: Reconcile Migration Templates

For the 5 templates that differ only in migration cosmetics, the QMS copy (which has been through document control via CR-017) will be treated as authoritative. The seed copy will be updated to match the QMS copy, with `revision_summary` updated to reference CR-098.

---

## 6. Justification

- INV-013-CAPA-001 requires corrective action to eliminate the existing template divergence
- New QMS instances bootstrapped from seed would receive inconsistent templates
- The VR compiler (CR-095) supports schema v5 features that the QMS TEMPLATE-VR does not declare
- Without alignment, the divergence will only grow as future CRs modify templates

---

## 7. Impact Assessment

### 7.1 Files Affected

| File | Change Type | Description |
|------|-------------|-------------|
| `QMS/TEMPLATE/TEMPLATE-VR.md` | Modify | Update from schema v3 to v5 |
| `qms-cli/seed/templates/TEMPLATE-CR.md` | Modify | Add VR column |
| `qms-cli/seed/templates/TEMPLATE-ADD.md` | Modify | Add VR column |
| `qms-cli/seed/templates/TEMPLATE-VAR.md` | Modify | Add VR column |
| `qms-cli/seed/templates/TEMPLATE-ER.md` | Modify | Reconcile with QMS |
| `qms-cli/seed/templates/TEMPLATE-INV.md` | Modify | Reconcile with QMS |
| `qms-cli/seed/templates/TEMPLATE-SOP.md` | Modify | Reconcile with QMS |
| `qms-cli/seed/templates/TEMPLATE-TC.md` | Modify | Reconcile with QMS |
| `qms-cli/seed/templates/TEMPLATE-TP.md` | Modify | Reconcile with QMS |

### 7.2 Documents Affected

| Document | Change Type | Description |
|----------|-------------|-------------|
| TEMPLATE-VR | Modify | Update to schema v5 |

### 7.3 Other Impacts

None. Template changes affect future document creation only. Existing documents are not affected.

---

## 8. Testing Summary

- Verify QMS TEMPLATE-VR matches seed copy after update (structural comparison)
- Verify seed TEMPLATE-CR/ADD/VAR EI tables include VR column matching QMS copies
- Verify all 9 template pairs are aligned (diff comparison)
- Run qms-cli test suite to confirm no regressions from seed template changes

---

## 9. Implementation Plan

### 9.1 Phase 1: Pre-Execution Baseline

Commit and push project repository to capture pre-execution state.

### 9.2 Phase 2: Update QMS TEMPLATE-VR

1. Checkout TEMPLATE-VR via QMS CLI
2. Update content from schema v3 to v5 (matching seed copy)
3. Update revision_summary to reference CR-098
4. Checkin TEMPLATE-VR

### 9.3 Phase 3: Update Seed Templates

1. Update seed TEMPLATE-CR: add VR column to EI table and execution instructions
2. Update seed TEMPLATE-ADD: add VR column to EI table and execution instructions
3. Update seed TEMPLATE-VAR: add VR column to resolution work section
4. Reconcile 5 Category C seed templates with QMS copies
5. Update revision_summary on all modified seed templates to reference CR-098
6. Commit seed template changes in qms-cli submodule

### 9.4 Phase 4: Verification

1. Diff all 9 template pairs to confirm alignment
2. Run qms-cli test suite

### 9.5 Phase 5: Post-Execution

Update submodule pointer and commit post-execution state.

---

## 10. Execution

<!--
EXECUTION PHASE INSTRUCTIONS
============================
NOTE: Do NOT delete this comment block. It provides guidance for execution.

PRE-EXECUTION: After releasing for execution, the first execution item is to
commit and push the project repository (including all submodules) to capture
the pre-execution baseline (per SOP-004 Section 5). Record the commit hash
in EI-1's execution summary.

POST-EXECUTION: The final execution item is to commit and push the project
repository (including all submodules) to capture the post-execution state
(per SOP-004 Section 5). Record the commit hash in the final EI's execution
summary.

- Sections 1-9 are PRE-APPROVED content - do NOT modify during execution
- Only THIS TABLE and the comment sections below should be edited during execution phase

COLUMNS:
- EI: Execution item identifier
- Task Description: What to do (static, from Implementation Plan)
- VR: "Yes" if integration verification required (static, set during planning);
  replaced with VR ID during execution (editable). Blank if no VR needed.
  See SOP-004 Section 9C.
- Execution Summary: Narrative of what was done, evidence, observations (editable)
- Task Outcome: Pass or Fail (editable)
- Performed By - Date: Signature (editable)

TASK OUTCOME:
- Pass: Task completed as planned
- Fail: Task could not be completed as planned - attach VAR with explanation

VAR TYPES (see VAR-TEMPLATE):
- Type 1: Use when the failed task is critical to CR objectives
- Type 2: Use when impact is contained and CR can conceptually close

EXECUTION SUMMARY EXAMPLES:
- "Implemented per plan. Commit abc123."
- "Modified src/module.py:45-67. Unit tests passing."
- "Created SOP-007 (now EFFECTIVE)."
-->

| EI | Task Description | VR | Execution Summary | Task Outcome | Performed By - Date |
|----|------------------|----|-------------------|--------------|---------------------|
| EI-1 | Pre-execution baseline: commit and push project state | | Pre-execution baseline at `bcc5375`. INV-013 IN_EXECUTION, CR-098 and CR-099 released. | Pass | claude - 2026-02-22 |
| EI-2 | Update QMS TEMPLATE-VR from schema v3 to v5 | | Checked out TEMPLATE-VR, updated from schema v3 to v5 matching seed copy. All 9 changes per Section 5.1 applied. Reviewed by QA, approved. TEMPLATE-VR v3.0 EFFECTIVE. | Pass | claude - 2026-02-22 |
| EI-3 | Update seed TEMPLATE-CR: add VR column | | Added VR column to EI table and execution instructions. Added TEMPLATE CR PATTERNS section (propagated from CR-099's QMS update). Updated revision_summary. | Pass | claude - 2026-02-22 |
| EI-4 | Update seed TEMPLATE-ADD: add VR column | | Added VR column to EI table (Section 5). Updated revision_summary. | Pass | claude - 2026-02-22 |
| EI-5 | Update seed TEMPLATE-VAR: add VR column | | Added VR column to resolution work EI table guidance (Section 7) with SOP-004 Section 9C reference. Updated revision_summary. | Pass | claude - 2026-02-22 |
| EI-6 | Reconcile 5 Category C seed templates with QMS copies | | Updated TEMPLATE-ER, INV, SOP, TP instance default revision_summary from "Initial release" to "'Initial draft'" (or "'Initial creation'" for SOP) to match QMS copies. TC was already identical. Updated template revision_summaries. | Pass | claude - 2026-02-22 |
| EI-7 | Verify all 9 template pairs are aligned | | Ran diff on all 9 pairs (skipping frontmatter). All body content identical. Only expected differences: template revision_summary references different CRs (QMS references CR-098/099, seed references CR-098). Commit `5124b4a` in qms-cli. | Pass | claude - 2026-02-22 |
| EI-8 | Post-execution: update submodule pointer, commit and push | | [PENDING - will complete with post-execution commit] | [Pass/Fail] | [PERFORMER] - [DATE] |

<!--
NOTE: Do NOT delete this comment. It provides guidance during document execution.

Add rows as needed. When adding rows, fill columns 3-5 during execution.
-->

---

### Execution Comments

| Comment | Performed By - Date |
|---------|---------------------|
| EI-3 also propagated the TEMPLATE CR PATTERNS section added by CR-099 to the seed copy, ensuring alignment includes the latest CR-099 changes. | claude - 2026-02-22 |

<!--
NOTE: Do NOT delete this comment. It provides guidance during document execution.

Record observations, decisions, or issues encountered during execution.
Add rows as needed.

This section is the appropriate place to attach VARs that do not apply
to any individual execution item, but apply to the CR as a whole.
-->

---

## 11. Execution Summary

<!--
NOTE: Do NOT delete this comment. It provides guidance during document execution.

Complete this section after all EIs are executed.
Summarize the overall outcome and any deviations from the plan.
-->

All 8 EIs complete. All 9 template pairs aligned between QMS and seed.

**Category B** (TEMPLATE-VR): QMS copy updated from schema v3 to v5. TEMPLATE-VR v3.0 EFFECTIVE.

**Category A** (TEMPLATE-CR, ADD, VAR): Seed copies updated with VR column. TEMPLATE-CR seed also received TEMPLATE CR PATTERNS section from CR-099.

**Category C** (ER, INV, SOP, TC, TP): Seed copies reconciled with QMS copies. Instance default revision_summary aligned. TC was already identical.

Verification: diff of all 9 pairs confirms body content is identical. Seed changes committed at `5124b4a` in qms-cli.

No deviations from plan.

---

## 12. References

- **SOP-001:** Document Control
- **SOP-002:** Change Control
- **INV-013:** Seed-QMS Template Divergence (parent investigation, CAPA-001)
- **CR-089:** VR column addition (source of Category A divergence)
- **CR-091:** Interactive VR template v3 (source of Category B divergence, QMS side)
- **CR-095:** VR template schema v5 (source of Category B divergence, seed side)

---

**END OF DOCUMENT**
