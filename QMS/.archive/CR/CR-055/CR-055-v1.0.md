---
title: Add Git MCP Server to claude-session.sh
revision_summary: Initial draft
---

# CR-055: Add Git MCP Server to claude-session.sh

## 1. Purpose

Update the main container session entry point script to automatically start the Git MCP server (port 8001) alongside the QMS MCP server (port 8000), providing complete MCP functionality for containerized Claude sessions.

---

## 2. Scope

### 2.1 Context

Follow-on to CR-054 (Git MCP Server for Container Operations). The Git MCP server was implemented but requires manual startup. This CR integrates it into the standard session startup flow.

- **Parent Document:** CR-054

### 2.2 Changes Summary

Modify `claude-session.sh` to:
- Start Git MCP server on port 8001 if not already running
- Verify Git MCP connectivity from container
- Update step numbering (4 steps → 5 steps)
- Update post-session messaging

### 2.3 Files Affected

- `claude-session.sh` - Add Git MCP server startup and verification

---

## 3. Current State

The `claude-session.sh` script starts only the QMS MCP server (port 8000). Users must manually start the Git MCP server using `docker/scripts/start-git-mcp.sh` before git operations work from containers.

---

## 4. Proposed State

The `claude-session.sh` script starts both MCP servers automatically:
- QMS MCP server on port 8000
- Git MCP server on port 8001

Containerized Claude sessions have full MCP functionality (QMS operations + git operations) without manual setup.

---

## 5. Change Description

### 5.1 Script Modifications

1. **Refactor Python detection** — Move Python executable detection before both server startups (shared logic)

2. **Add Step 2: Git MCP server startup** — Mirror the QMS MCP startup pattern:
   - Check if server already running on port 8001
   - If not, start in background with PID file
   - Wait for server to initialize
   - Log success/failure

3. **Update step numbering** — Change from 4 steps to 5 steps

4. **Update post-session message** — Show both PID files for cleanup

### 5.2 New Step Structure

| Step | Description |
|------|-------------|
| 1/5 | Check/start QMS MCP server (port 8000) |
| 2/5 | Check/start Git MCP server (port 8001) |
| 3/5 | Start container |
| 4/5 | Verify MCP connectivity |
| 5/5 | Launch Claude Code |

---

## 6. Justification

- **Problem:** Git MCP server requires manual startup, reducing the "zero-friction" goal of the container infrastructure
- **Impact of not making this change:** Users must remember to run an extra script before container sessions
- **Solution:** Integrate Git MCP startup into the standard session script

---

## 7. Impact Assessment

### 7.1 Files Affected

| File | Change Type | Description |
|------|-------------|-------------|
| `claude-session.sh` | Modify | Add Git MCP server startup |

### 7.2 Documents Affected

| Document | Change Type | Description |
|----------|-------------|-------------|
| None | — | No QMS documents affected |

### 7.3 Other Impacts

- Session startup will take slightly longer (Git MCP server initialization)
- Two PID files will be created instead of one

---

## 8. Testing Summary

- Run `./claude-session.sh` from a fresh state (no servers running)
- Verify both servers start successfully
- Verify container can reach both servers
- Inside container, verify both `qms_inbox()` and `git_exec("status")` work

---

## 9. Implementation Plan

### 9.1 Implementation

1. Edit `claude-session.sh` to add Git MCP server startup
2. Test full session startup flow
3. Verify MCP connectivity for both servers

---

## 10. Execution

| EI | Task Description | Execution Summary | Task Outcome | Performed By - Date |
|----|------------------|-------------------|--------------|---------------------|
| EI-1 | Modify `claude-session.sh` to start Git MCP server | [SUMMARY] | [Pass/Fail] | [PERFORMER] - [DATE] |
| EI-2 | Test session startup with both servers | [SUMMARY] | [Pass/Fail] | [PERFORMER] - [DATE] |

---

### Execution Comments

| Comment | Performed By - Date |
|---------|---------------------|
| [COMMENT] | [PERFORMER] - [DATE] |

---

## 11. Execution Summary

[EXECUTION_SUMMARY]

---

## 12. References

- **SOP-001:** Document Control
- **SOP-002:** Change Control
- **CR-054:** Git MCP Server for Container Operations

---

**END OF DOCUMENT**
