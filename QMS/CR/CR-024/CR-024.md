---
title: Relocate QMS CLI to qms-cli/ Directory
revision_summary: 'CR-024: Relocate QMS CLI to qms-cli/ directory'
---

# CR-024: Relocate QMS CLI to qms-cli/ Directory

## 1. Purpose

This CR relocates the QMS CLI from the `.claude/` directory to a dedicated `qms-cli/` directory at the project root and removes the `/qms` slash command. This change creates a cleaner project structure by placing the CLI in a clearly named directory alongside the `QMS/` data directory, preparing for future integration of the form_builder patterns.

---

## 2. Scope

### 2.1 Context

Independent improvement to prepare for form_builder integration and improve project organization. The QMS CLI scripts are currently mixed with other Claude-specific configuration files in `.claude/`, making the structure unclear.

- **Parent Document:** None

### 2.2 Changes Summary

1. Create `qms-cli/` directory at project root
2. Move 5 QMS CLI files from `.claude/` to `qms-cli/`
3. Update all documentation references to use new path
4. Remove the `/qms` slash command (deprecated in favor of direct invocation)

### 2.3 Files Affected

**Files to Move:**
- `.claude/qms.py` → `qms-cli/qms.py`
- `.claude/qms_meta.py` → `qms-cli/qms_meta.py`
- `.claude/qms_audit.py` → `qms-cli/qms_audit.py`
- `.claude/qms_schema.py` → `qms-cli/qms_schema.py`
- `.claude/README-qms.md` → `qms-cli/README.md`

**Files to Delete:**
- `.claude/commands/qms.md` - Slash command definition

**Files to Update:**
- `CLAUDE.md` - QMS Identity section
- `.claude/agents/qa.md` - QMS commands
- `.claude/agents/tu_ui.md` - QMS commands
- `.claude/agents/tu_scene.md` - QMS commands
- `.claude/agents/tu_sketch.md` - QMS commands
- `.claude/agents/tu_sim.md` - QMS commands
- `.claude/agents/bu.md` - QMS commands
- `QMS/SOP/SOP-001.md` - All CLI command references

---

## 3. Current State

- QMS CLI scripts live in `.claude/` alongside other Claude-specific configuration
- The `/qms` slash command (defined in `.claude/commands/qms.md`) invokes `python .claude/qms.py`
- Documentation references `/qms --user <user> <command>` pattern throughout

---

## 4. Proposed State

- QMS CLI scripts reside in `qms-cli/` directory at project root
- No slash command exists; the `/qms` command is removed
- Canonical invocation is `python qms-cli/qms.py --user <user> <command>`
- All documentation references the new invocation pattern

---

## 5. Change Description

### 5.1 Directory Structure

Create a new `qms-cli/` directory at the project root containing:

```
qms-cli/
├── qms.py          # Main CLI entry point
├── qms_meta.py     # Metadata management
├── qms_audit.py    # Audit trail management
├── qms_schema.py   # Schema definitions
└── README.md       # User documentation
```

### 5.2 Path Discovery

The existing `find_project_root()` function in qms.py searches upward from cwd for the `QMS/` directory. This logic works regardless of where the script is located. The fallback logic checking `../QMS` also works from `qms-cli/`.

### 5.3 Import Paths

The imports in qms.py use bare module names (`from qms_meta import ...`). These work when running `python qms-cli/qms.py` from the project root because Python adds the script's directory to `sys.path`.

### 5.4 User Workspaces

User workspaces remain at `.claude/users/`. The path is defined as:
```python
USERS_ROOT = PROJECT_ROOT / ".claude" / "users"
```
This absolute path (based on PROJECT_ROOT) works regardless of CLI location.

### 5.5 Documentation Updates

All references to `/qms --user {USER}` change to `python qms-cli/qms.py --user {USER}`.

---

## 6. Justification

- **Clarity:** The QMS CLI is a distinct subsystem that deserves its own directory rather than being mixed with Claude agent configuration
- **Preparation:** This relocation prepares for future integration of form_builder patterns into the QMS CLI
- **Simplicity:** Removing the slash command eliminates indirection; direct Python invocation is clearer
- **Discoverability:** A clearly named `qms-cli/` directory is easier to find than scripts buried in `.claude/`

---

## 7. Impact Assessment

### 7.1 Files Affected

| File | Change Type | Description |
|------|-------------|-------------|
| `qms-cli/` | Create | New directory |
| `qms-cli/qms.py` | Create (move) | Main CLI from `.claude/qms.py` |
| `qms-cli/qms_meta.py` | Create (move) | From `.claude/qms_meta.py` |
| `qms-cli/qms_audit.py` | Create (move) | From `.claude/qms_audit.py` |
| `qms-cli/qms_schema.py` | Create (move) | From `.claude/qms_schema.py` |
| `qms-cli/README.md` | Create (move) | From `.claude/README-qms.md` |
| `.claude/commands/qms.md` | Delete | Remove slash command |

### 7.2 Documents Affected

| Document | Change Type | Description |
|----------|-------------|-------------|
| CLAUDE.md | Modify | Update QMS Identity section |
| SOP-001 | Modify | Update all CLI command references |
| qa.md | Modify | Update QMS commands section |
| tu_ui.md | Modify | Update QMS commands section |
| tu_scene.md | Modify | Update QMS commands section |
| tu_sketch.md | Modify | Update QMS commands section |
| tu_sim.md | Modify | Update QMS commands section |
| bu.md | Modify | Update QMS commands section |

### 7.3 Other Impacts

- Agents must use `python qms-cli/qms.py` instead of `/qms`
- Any muscle memory or scripts referencing old path need updating

---

## 8. Testing Summary

- Run `python qms-cli/qms.py --user claude inbox` from project root - should list inbox
- Run `python qms-cli/qms.py --user qa status SOP-001` - should show SOP status
- Verify import paths resolve correctly (no ModuleNotFoundError)
- Verify USERS_ROOT still points to `.claude/users/`

---

## 9. Implementation Plan

### 9.1 Phase 1: Create Directory and Move Files

1. Create `qms-cli/` directory at project root
2. Move 5 QMS CLI files to new location using git mv

### 9.2 Phase 2: Update Moved Files

1. Update qms.py docstring (line 10)
2. Update README.md usage examples

### 9.3 Phase 3: Update Documentation

1. Update CLAUDE.md QMS Identity section
2. Update 6 agent definition files
3. Update SOP-001.md command references

### 9.4 Phase 4: Remove Slash Command

1. Delete `.claude/commands/qms.md`

### 9.5 Phase 5: Verification

1. Verify CLI functionality with test commands

---

## 10. Execution

| EI | Task Description | Execution Summary | Task Outcome | Performed By - Date |
|----|------------------|-------------------|--------------|---------------------|
| EI-1 | Create `qms-cli/` directory and move 5 QMS CLI files | Created directory with `mkdir -p qms-cli`. Moved 5 files via `git mv`: qms.py, qms_meta.py, qms_audit.py, qms_schema.py, README-qms.md → README.md | Pass | claude - 2026-01-10 |
| EI-2 | Update qms.py docstring and README.md usage examples | Updated docstring line 10 and README usage examples to reference `python qms-cli/qms.py` | Pass | claude - 2026-01-10 |
| EI-3 | Update CLAUDE.md QMS Identity section | Replaced `/qms --user claude` pattern with `python qms-cli/qms.py --user claude` throughout section | Pass | claude - 2026-01-10 |
| EI-4 | Update 6 agent definition files | Updated qa.md, tu_ui.md, tu_scene.md, tu_sketch.md, tu_sim.md, bu.md with new CLI path | Pass | claude - 2026-01-10 |
| EI-5 | Update SOP-001.md command references | Replaced all 45 occurrences of `qms --user` with `python qms-cli/qms.py --user`. SOP-001 v16.0 now EFFECTIVE. | Pass | claude - 2026-01-10 |
| EI-6 | Delete `.claude/commands/qms.md` | Removed via `git rm .claude/commands/qms.md`. Slash command no longer exists. | Pass | claude - 2026-01-10 |
| EI-7 | Verify CLI functionality | Tested `inbox`, `status SOP-001`, `workspace` commands - all working from new location | Pass | claude - 2026-01-10 |

---

### Execution Comments

| Comment | Performed By - Date |
|---------|---------------------|
| SOP-001 updated as child document under this CR. Completed review/approval cycle: v15.1 reviewed and approved, now EFFECTIVE as v16.0. | claude - 2026-01-10 |

---

## 11. Execution Summary

All 7 execution items completed successfully. The QMS CLI has been relocated from `.claude/` to `qms-cli/`. The `/qms` slash command has been removed. All documentation (CLAUDE.md, 6 agent definition files, SOP-001) has been updated to reference the new CLI path `python qms-cli/qms.py`. SOP-001 completed its own approval cycle and is now EFFECTIVE at v16.0. CLI functionality verified from the new location.

---

## 12. References

- **SOP-001:** Document Control
- **SOP-002:** Change Control
- **SOP-005:** Code Governance

---

**END OF DOCUMENT**
