---
title: Implement ADD (Addendum) Document Type
revision_summary: 'Execution complete: all 9 EIs pass'
---

# CR-082: Implement ADD (Addendum) Document Type

## 1. Purpose

Implement the ADD (Addendum) document type in the QMS CLI, fulfilling CAPA-003 from INV-011. ADD provides a lightweight, formal mechanism to correct or supplement closed executable documents without requiring a full INV/CAPA cycle.

---

## 2. Scope

### 2.1 Context

INV-011 investigated CR-075's incomplete execution. CAPA-003 (preventive) identified the need for a post-closure correction mechanism. The QMS currently lacks any way to correct a closed document — the only path is a full INV/CAPA cycle. ADD provides a structured alternative.

- **Parent Document:** INV-011 (CAPA-003)

### 2.2 Changes Summary

Add ADD as a new executable child document type. ADD is structurally similar to VAR (child document, lives alongside parent, executable lifecycle) but semantically distinct: VARs handle execution failures during active work; ADDs handle corrections discovered after closure.

### 2.3 Files Affected

- `qms-cli/qms_config.py` — Add ADD to DOCUMENT_TYPES registry
- `qms-cli/qms_schema.py` — Add ADD to DOC_TYPES, FOLDER_DOC_TYPES, EXECUTABLE_TYPES, DOC_ID_PATTERNS
- `qms-cli/qms_paths.py` — Add ADD type resolution and path handling
- `qms-cli/commands/create.py` — Add ADD creation logic with CLOSED parent validation
- `qms-cli/commands/close.py` — Update error message to include ADD
- `QMS/TEMPLATE/TEMPLATE-ADD.md` — New template (controlled document)
- `qms-cli/seed/templates/TEMPLATE-ADD.md` — Seed copy for `qms init`
- `qms-cli/tests/qualification/test_document_types.py` — New qualification tests
- `QMS/SDLC-QMS/SDLC-QMS-RS.md` — Update requirements
- `QMS/SDLC-QMS/SDLC-QMS-RTM.md` — Update traceability matrix
- `QMS/SOP/SOP-001.md` — Add ADD to document control definitions
- `QMS/SOP/SOP-004.md` — Add Section 9B for ADD execution procedures

---

## 3. Current State

The QMS supports six executable document types: CR, INV, TP, ER, VAR, and CAPA. When a closed document requires correction, the only formal path is to open an Investigation (INV), which triggers a full CAPA cycle. There is no lightweight mechanism for post-closure corrections.

---

## 4. Proposed State

The QMS supports seven executable document types: CR, INV, TP, ER, VAR, CAPA, and ADD. ADD documents can be created against any CLOSED executable parent (CR, INV, VAR, or ADD). ADDs follow the full executable lifecycle (pre-review through closure) and are stored alongside their parent document.

---

## 5. Change Description

### 5.1 ADD Document Semantics

ADD is a child document created to correct or supplement a closed executable document. Key design decisions:

- **Parent state requirement:** Parent must be CLOSED (enforces post-closure semantics)
- **Valid parent types:** CR, INV, VAR, ADD. TP and ER are excluded because test-related corrections are handled through their own mechanisms (ER for test failures, nested ERs for re-execution failures). ADDs address non-test executable documents where post-closure omissions are discovered.
- **File placement:** Alongside parent (e.g., `CR-001/CR-001-ADD-001.md`)
- **Executable:** Follows full pre-review → execution → post-review → close lifecycle
- **Nesting:** ADDs can nest (e.g., `CR-001-ADD-001-ADD-001`)

### 5.2 CLI Code Changes

**`qms_config.py`** — Add to DOCUMENT_TYPES:
```python
"ADD": {"path": "CR", "executable": True, "prefix": "ADD"},
```

**`qms_schema.py`** — Add ADD to validation sets and ID patterns:
- `DOC_TYPES`: Add `"ADD"`
- `FOLDER_DOC_TYPES`: Add `"ADD"`
- `EXECUTABLE_TYPES`: Add `"ADD"`
- `DOC_ID_PATTERNS`: Pattern matching `CR-001-ADD-001`, `INV-001-ADD-001`, `CR-001-VAR-001-ADD-001`, etc.

**`qms_paths.py`** — Three changes:
- `get_doc_type()`: Add ADD detection before VAR check (because `CR-001-VAR-001-ADD-001` contains both `-VAR-` and `-ADD-`)
- `get_doc_path()`: Extend VAR branch to include ADD
- `get_archive_path()`: Same extension

**`commands/create.py`** — Four changes:
- Add ADD to child type list requiring `--parent`
- Validate parent type (CR, INV, VAR, or ADD)
- Validate parent is CLOSED
- Generate sequential ADD ID under parent

**`commands/close.py`** — Update error message to include ADD in executable types list.

### 5.3 Template

TEMPLATE-ADD modeled on TEMPLATE-VAR with sections appropriate to post-closure corrections:
1. Addendum Identification (parent, what needs correction)
2. Description of Omission (what was missed)
3. Impact Assessment (effect on parent objectives)
4. Correction Plan (EI table)
5. Execution (EI table, editable during execution)
6. Execution Comments
7. Execution Summary
8. References

### 5.4 SOP Updates

**SOP-001:** Add ADD to scope, definitions, naming conventions, and executable documents list.

**SOP-004:** Add Section 9B covering ADD procedures: when to use ADD vs VAR vs INV, content requirements, naming, parent state requirement, and scope handoff.

---

## 6. Justification

- INV-011 CAPA-003 requires a post-closure correction mechanism
- The current INV/CAPA cycle is heavyweight for simple corrections (e.g., a missed config change discovered after CR closure)
- ADD provides formal traceability without the overhead of a full investigation
- Structurally analogous to VAR (proven pattern), minimizing implementation risk

---

## 7. Impact Assessment

### 7.1 Files Affected

| File | Change Type | Description |
|------|-------------|-------------|
| `qms-cli/qms_config.py` | Modify | Add ADD to DOCUMENT_TYPES |
| `qms-cli/qms_schema.py` | Modify | Add ADD to validation sets and ID patterns |
| `qms-cli/qms_paths.py` | Modify | Add ADD type resolution and path handling |
| `qms-cli/commands/create.py` | Modify | Add ADD creation with CLOSED parent validation |
| `qms-cli/commands/close.py` | Modify | Update error message |
| `qms-cli/tests/qualification/test_document_types.py` | Modify | Add 7 new qualification tests |
| `QMS/TEMPLATE/TEMPLATE-ADD.md` | Create | New template |
| `qms-cli/seed/templates/TEMPLATE-ADD.md` | Create | Seed copy |

### 7.2 Documents Affected

| Document | Change Type | Description |
|----------|-------------|-------------|
| SDLC-QMS-RS | Modify | Update REQ-DOC-001, -002, -005, -012; add REQ-DOC-015 |
| SDLC-QMS-RTM | Modify | Add 7 test entries, update qualified baseline |
| SOP-001 | Modify | Sections 2, 3, 6.1, 8.2 |
| SOP-004 | Modify | Section 2, new Section 9B |

### 7.3 Other Impacts

None. ADD follows the existing executable document lifecycle — no new workflow states, transitions, or permissions required.

### 7.4 Development Controls

This CR implements changes to qms-cli, a controlled submodule. Development follows established controls:

1. **Test environment isolation:** Development in a non-QMS-controlled directory
2. **Branch isolation:** All development on branch `cr-082-add-document-type`
3. **Write protection:** `.claude/settings.local.json` blocks direct writes to `qms-cli/`
4. **Qualification required:** All new/modified requirements must have passing tests before merge
5. **CI verification:** Tests must pass on GitHub Actions for dev branch
6. **PR gate:** Changes merge to main only via PR after RS/RTM approval
7. **Submodule update:** Parent repo updates pointer only after PR merge

### 7.5 Qualified State Continuity

| Phase | main branch | RS/RTM Status | Qualified Release |
|-------|-------------|---------------|-------------------|
| Before CR | Current commit | EFFECTIVE v12.0/v14.0 | CLI-6.0 |
| During execution | Unchanged | DRAFT (checked out) | CLI-6.0 (unchanged) |
| Post-approval | Merged from cr-082-add-document-type | EFFECTIVE v13.0/v15.0 | CLI-7.0 |

---

## 8. Testing Summary

7 new qualification tests:

- `test_create_add_under_cr` — Create ADD under CLOSED CR, verify file placement and metadata
- `test_create_add_under_inv` — Create ADD under CLOSED INV
- `test_create_add_under_var` — Create ADD under CLOSED VAR
- `test_create_add_requires_closed_parent` — Reject ADD when parent is not CLOSED
- `test_add_sequential_id_generation` — Multiple ADDs under same parent: ADD-001, ADD-002
- `test_add_nested_under_var` — `CR-001-VAR-001-ADD-001` path resolution
- `test_create_add_requires_parent` — Verify `--parent` flag is required

Plus: full regression suite (all 396+ existing tests must pass).

---

## 9. Implementation Plan

### 9.1 Phase 1: Test Environment Setup

1. Clone/update qms-cli from GitHub
2. Create and checkout branch `cr-082-add-document-type`
3. Verify clean test environment (all existing tests pass)

### 9.2 Phase 2: Requirements (RS Update)

1. Checkout SDLC-QMS-RS
2. Update REQ-DOC-001 (add ADD to core types), REQ-DOC-002 (ADD parent relationships), REQ-DOC-005 (ADD example), REQ-DOC-012 (ADD in parent folder)
3. Add REQ-DOC-015 (ADD requires CLOSED parent)
4. Checkin RS, route for review and approval

### 9.3 Phase 3: Implementation

1. Implement code changes in qms_config.py, qms_schema.py, qms_paths.py, commands/create.py, commands/close.py
2. Create TEMPLATE-ADD.md (QMS + seed)
3. Test locally

### 9.4 Phase 4: Qualification

1. Add 7 new qualification tests to test_document_types.py
2. Run full test suite, verify all tests pass
3. Push to dev branch
4. Verify GitHub Actions CI passes
5. Document qualified commit hash

### 9.5 Phase 5: RTM Update and Approval

1. Checkout SDLC-QMS-RTM
2. Add 7 test entries, update qualified baseline with CI-verified commit
3. Checkin RTM, route for review and approval
4. **Verify RTM reaches EFFECTIVE status before proceeding to Phase 6**

### 9.6 Phase 6: Merge and Submodule Update

**Prerequisite:** RS and RTM must both be EFFECTIVE.

1. Create PR to merge cr-082-add-document-type to main
2. Merge PR
3. Update submodule pointer in parent repo

### 9.7 Phase 7: SOP Updates

1. Update SOP-001 (Sections 2, 3, 6.1, 8.2)
2. Update SOP-004 (Section 2, new Section 9B)
3. Route both through review and approval

---

## 10. Execution

| EI | Task Description | Execution Summary | Task Outcome | Performed By - Date |
|----|------------------|-------------------|--------------|---------------------|
| EI-1 | Set up test environment and create dev branch | Cloned qms-cli, created branch `cr-082-add-document-type`, verified all 396 existing tests pass | Pass | claude — 2026-02-15 |
| EI-2 | Update SDLC-QMS-RS with new/modified requirements, route to EFFECTIVE | Updated REQ-DOC-001/-002/-005/-012, added REQ-DOC-015, updated REQ-WF-003; QA reviewed and approved → SDLC-QMS-RS v13.0 EFFECTIVE | Pass | claude — 2026-02-15 |
| EI-3 | Implement code changes in qms-cli submodule | Modified qms_config.py, qms_schema.py, qms_paths.py, commands/create.py, commands/close.py; ADD type detection, CLOSED parent validation, sequential ID generation | Pass | claude — 2026-02-15 |
| EI-4 | Create TEMPLATE-ADD.md (QMS + seed) | Created TEMPLATE-ADD with 8 sections; QA review found em dash inconsistency (5 instances), fixed, re-reviewed, approved → TEMPLATE-ADD v1.0 EFFECTIVE; seed copy created | Pass | claude — 2026-02-15 |
| EI-5 | Write and run qualification tests (7 new tests + full regression) | 7 new tests in test_document_types.py; all 403 tests pass (396 existing + 7 new) | Pass | claude — 2026-02-15 |
| EI-6 | Update SDLC-QMS-RTM with test results, route to EFFECTIVE | Added 7 test entries, REQ-DOC-015 section, updated qualified baseline (403 tests, commit dffd56c, CI run verified); QA reviewed and approved → SDLC-QMS-RTM v15.0 EFFECTIVE | Pass | claude — 2026-02-15 |
| EI-7 | Create PR, merge to main, update submodule pointer | PR #13 created and squash-merged to main (commit dffd56c); 403 tests pass on main; submodule pointer updated in parent repo | Pass | claude — 2026-02-15 |
| EI-8 | Update SOP-001, route through review/approval to EFFECTIVE | Added ADD to Sections 2, 3, 6.1, 8.2; QA reviewed and approved → SOP-001 v20.0 EFFECTIVE | Pass | claude — 2026-02-15 |
| EI-9 | Update SOP-004, route through review/approval to EFFECTIVE | Added ADD to Sections 2, 3; created new Section 9B (9B.1-9B.5); QA reviewed and approved → SOP-004 v4.0 EFFECTIVE | Pass | claude — 2026-02-15 |

<!--
NOTE: Do NOT delete this comment. It provides guidance during document execution.

Add rows as needed. When adding rows, fill columns 3-5 during execution.
-->

---

### Execution Comments

| Comment | Performed By - Date |
|---------|---------------------|
| Execution order deviated from plan: code (EI-3) and template (EI-4) completed before RS (EI-2) to enable testing. All dependencies satisfied. | claude — 2026-02-15 |
| QA found em dash vs hyphen inconsistency in TEMPLATE-ADD during EI-4 review. Fixed in both QMS and seed copies before re-submission. | claude — 2026-02-15 |
| EI-5 test `test_add_nested_under_var` (from plan) renamed to `test_create_add_under_var` for consistency; `test_create_add_rejects_invalid_parent_type` added as 7th test instead of the originally planned name. | claude — 2026-02-15 |

<!--
NOTE: Do NOT delete this comment. It provides guidance during document execution.

Record observations, decisions, or issues encountered during execution.
Add rows as needed.

This section is the appropriate place to attach VARs that do not apply
to any individual execution item, but apply to the CR as a whole.
-->

---

## 11. Execution Summary

<!--
NOTE: Do NOT delete this comment. It provides guidance during document execution.

Complete this section after all EIs are executed.
Summarize the overall outcome and any deviations from the plan.
-->

All 9 execution items completed successfully. ADD document type is fully implemented and qualified:

- **Code:** 5 files modified in qms-cli, merged to main via PR #13 (commit dffd56c)
- **Template:** TEMPLATE-ADD v1.0 EFFECTIVE with 8 sections for post-closure corrections
- **Tests:** 7 new qualification tests, 403 total tests passing (CI-verified)
- **Requirements:** SDLC-QMS-RS v13.0 EFFECTIVE (REQ-DOC-015 added, 4 requirements updated)
- **Traceability:** SDLC-QMS-RTM v15.0 EFFECTIVE (qualified baseline CLI-7.0)
- **Procedures:** SOP-001 v20.0 EFFECTIVE, SOP-004 v4.0 EFFECTIVE (Section 9B added)

No VARs required. One minor finding (em dash inconsistency) was corrected during template review before approval. CAPA-003 from INV-011 is now fulfilled.

---

## 12. References

- **INV-011:** CR-075 incomplete execution investigation (CAPA-003)
- **SOP-001:** Document Control
- **SOP-002:** Change Control
- **SOP-004:** Document Execution
- **SDLC-QMS-RS:** QMS CLI Requirements Specification
- **SDLC-QMS-RTM:** QMS CLI Requirements Traceability Matrix

---

**END OF DOCUMENT**
