---
title: Unified launch.sh Replaces Named Scripts in Pre-Approved Scope
revision_summary: Both EIs executed and passing; closure documented
---

# CR-056-VAR-002: Unified launch.sh Replaces Named Scripts in Pre-Approved Scope

## 1. Variance Identification

| Parent Document | Affected Item | VAR Type |
|-----------------|---------------|----------|
| CR-056 | Sections 2.2, 2.3, 5.4, 5.5, 7.1, 8 (script names) | Type 1 |

<!--
NOTE: Do NOT delete this comment. It provides guidance during document execution.

VAR TYPE:
- Type 1: Full closure required to clear block on parent
- Type 2: Pre-approval sufficient to clear block on parent
-->

---

## 2. Detailed Description

CR-056's pre-approved scope names specific scripts: `claude-session.sh` (to be extended) and `multi-agent-session.sh` (to be created). During execution, the original `claude-session.sh` was iteratively developed through four variants (`claude-session.sh`, `claude-session-updated.sh`, `claude-session-v2.sh`, `claude-session-v3.sh`) alongside `multi-agent-session.sh`. After CR-057 resolved MCP reliability, all five scripts were superseded by a single unified launcher: `launch.sh`.

**Expected (per pre-approved scope):** `claude-session.sh` extended with agent parameter, `multi-agent-session.sh` created as separate multi-agent launcher.

**Actual:** `launch.sh` created at repo root, providing both single-agent and multi-agent modes in one script. The five previous scripts remain in the repo but are functionally superseded.

The functional requirements are identical — `launch.sh` does everything the pre-approved scripts were designed to do — but the file names and structure differ from what was approved.

---

## 3. Root Cause

Iterative development during CR-056 and CR-057 execution revealed that multiple separate scripts created maintenance burden and inconsistency. The `docker run -d -e SETUP_ONLY=1` + `docker exec -it` pattern (developed to support the stdio proxy) made it natural to unify all launch logic into a single script. This consolidation was a practical improvement discovered during execution, not anticipated during planning.

---

## 4. Variance Type

Scope Error — The pre-approved scope specified particular script names and a two-script architecture. The implementation delivered the same functionality through a different (better) structure. The scope was not wrong per se, but it locked in implementation details that were superseded by a superior approach discovered during execution.

<!--
NOTE: Do NOT delete this comment. It provides guidance during document execution.

Select one:
- Execution Error: Executor made a mistake or didn't follow instructions
- Scope Error: Plan/scope was written or designed incorrectly
- System Error: The system behaved unexpectedly
- Documentation Error: Error in a document other than the parent
- External Factor: Environmental or external issue
- Other: See Detailed Description
-->

---

## 5. Impact Assessment

**Effect on parent objectives:** None. CR-056's purpose — "Enable multiple QMS agents to run simultaneously in separate containers, with automatic notification when new tasks arrive in their inboxes" — is fully met by `launch.sh`. Every functional requirement in the pre-approved scope is satisfied:

| Pre-approved requirement | Status |
|--------------------------|--------|
| Agent parameter support (`./script qa`) | Met: `./launch.sh qa` |
| Per-agent bind mounts | Met: identical volume mounts |
| CLAUDE.md overlay for non-claude agents | Met: identical mount logic |
| Multi-agent launch in separate terminals | Met: `./launch.sh claude qa` |
| Inbox watcher integration | Met: auto-started in multi-agent mode |
| MCP server auto-start | Met: `ensure_mcp_servers()` |

**What this VAR addresses:** The naming deviation and the cleanup of obsolete scripts that accumulated during iterative development.

---

## 6. Proposed Resolution

1. Delete the five superseded launcher scripts from the repository
2. QA review and approval confirms that `launch.sh` satisfies the intent of the pre-approved scope, retroactively authorizing the naming deviation

### Scripts to delete

| Script | Reason |
|--------|--------|
| `claude-session.sh` | Original single-agent launcher; superseded by `launch.sh` |
| `claude-session-updated.sh` | Iterative variant from EI-3; superseded by `launch.sh` |
| `claude-session-v2.sh` | Iterative variant; superseded by `launch.sh` |
| `claude-session-v3.sh` | Iterative variant with docker run pattern; superseded by `launch.sh` |
| `multi-agent-session.sh` | Multi-agent launcher; superseded by `launch.sh` multi-agent mode |

---

## 7. Resolution Work

<!--
NOTE: Do NOT delete this comment block. It provides guidance for execution.

If the resolution work encounters issues, create a nested VAR.
-->

### Resolution: CR-056

| EI | Task Description | Execution Summary | Task Outcome | Performed By - Date |
|----|------------------|-------------------|--------------|---------------------|
| EI-1 | Delete the five superseded launcher scripts | Deleted `claude-session.sh`, `claude-session-updated.sh`, `claude-session-v2.sh`, `claude-session-v3.sh`, and `multi-agent-session.sh` from repo root. All five confirmed gone. `launch.sh` remains intact. | Pass | claude - 2026-02-06 |
| EI-2 | Verify launch.sh still works after deletion (single-agent smoke test) | Lead performed full end-to-end test: `./launch.sh claude qa` launched both agents in separate terminals, routed a document from claude to QA, QA received and processed the task, CR cancelled cleanly. Everything worked perfectly. No dependency on deleted scripts. | Pass | lead - 2026-02-06 |

---

### Resolution Comments

| Comment | Performed By - Date |
|---------|---------------------|
| Both EIs complete. Scripts deleted, Lead confirmed full end-to-end test pass after deletion. | claude - 2026-02-06 |

<!--
NOTE: Do NOT delete this comment. It provides guidance during document execution.

Record observations, decisions, or issues encountered during resolution.
Add rows as needed.

This section is the appropriate place to attach nested VARs that do not
apply to any individual resolution item, but apply to the resolution as a whole.
-->

---

## 8. VAR Closure

| Details of Resolution | Outcome | Performed By - Date |
|-----------------------|---------|---------------------|
| Five obsolete launcher scripts deleted. Lead performed full end-to-end multi-agent test (`./launch.sh claude qa`) confirming `launch.sh` satisfies all CR-056 functional requirements. The naming deviation from the pre-approved scope is retroactively authorized by QA approval of this VAR. | Resolved | claude + lead - 2026-02-06 |

---

## 9. References

- **SOP-004:** Document Execution
- **CR-056:** Multi-Agent Container Session Infrastructure (parent)
- **CR-056-VAR-001:** MCP reliability variance (resolved; introduced the stdio proxy that motivated unification)
- **CR-057:** MCP Stdio Proxy for Reliable Container MCP Connections (CLOSED)
- **Commit 6a56432:** Introduction of `launch.sh` and final end-to-end test

---

**END OF VARIANCE REPORT**
